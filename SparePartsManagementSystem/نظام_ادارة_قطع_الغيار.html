<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…Ø­Ù„ Ù‚Ø·Ø¹ Ø§Ù„ØºÙŠØ§Ø±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
        }
        
        .header {
            background: white;
            border-bottom: 1px solid #e0e0e0;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .header h1 {
            color: #1a1a1a;
            font-size: 24px;
        }
        
        .header p {
            color: #666;
            font-size: 14px;
            margin-top: 5px;
        }
        
        .btn-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: #2563eb;
            color: white;
        }
        
        .btn-primary:hover {
            background: #1d4ed8;
        }
        
        .btn-outline {
            background: white;
            color: #374151;
            border: 1px solid #d1d5db;
        }
        
        .btn-outline:hover {
            background: #f9fafb;
        }
        
        .btn-danger {
            background: white;
            color: #dc2626;
            border: 1px solid #dc2626;
        }
        
        .btn-danger:hover {
            background: #fef2f2;
        }
        
        .btn-orange {
            background: white;
            color: #ea580c;
            border: 1px solid #ea580c;
        }
        
        .btn-orange:hover {
            background: #fff7ed;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Dashboard */
        .dashboard {
            margin-bottom: 30px;
        }
        
        .dashboard h2 {
            margin-bottom: 15px;
            color: #1a1a1a;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .stat-title {
            color: #666;
            font-size: 14px;
            font-weight: 500;
        }
        
        .stat-icon {
            width: 20px;
            height: 20px;
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: bold;
            color: #1a1a1a;
        }
        
        .stat-subtitle {
            color: #999;
            font-size: 12px;
            margin-top: 5px;
        }
        
        .stat-card.blue { border-top: 3px solid #2563eb; }
        .stat-card.green { border-top: 3px solid #16a34a; }
        .stat-card.yellow { border-top: 3px solid #ca8a04; }
        .stat-card.red { border-top: 3px solid #dc2626; }
        .stat-card.purple { border-top: 3px solid #9333ea; }
        
        .stat-card.green .stat-value { color: #16a34a; }
        .stat-card.yellow .stat-value { color: #ca8a04; }
        .stat-card.red .stat-value { color: #dc2626; }
        .stat-card.purple .stat-value { color: #9333ea; }
        .stat-card.blue .stat-value { color: #2563eb; }
        
        /* Search Section */
        .search-section {
            background: #eff6ff;
            border: 1px solid #bfdbfe;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .search-header {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #1e40af;
            margin-bottom: 15px;
        }
        
        .search-header h3 {
            font-size: 18px;
        }
        
        .search-box {
            position: relative;
        }
        
        .search-input {
            width: 100%;
            padding: 15px 50px;
            font-size: 16px;
            border: 2px solid #bfdbfe;
            border-radius: 10px;
            text-align: right;
            background: white;
            transition: border-color 0.2s;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #2563eb;
        }
        
        .search-icon {
            position: absolute;
            right: 18px;
            top: 50%;
            transform: translateY(-50%);
            color: #2563eb;
        }
        
        .clear-search {
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #999;
            cursor: pointer;
            font-size: 18px;
            display: none;
        }
        
        .clear-search:hover {
            color: #666;
        }
        
        .search-results {
            margin-top: 10px;
            color: #1e40af;
            font-size: 14px;
        }
        
        /* Filters */
        .filters {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .filter-label {
            color: #666;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .filter-btn {
            padding: 8px 16px;
            border: 1px solid #d1d5db;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
        }
        
        .filter-btn:hover {
            background: #f9fafb;
        }
        
        .filter-btn.active {
            background: #2563eb;
            color: white;
            border-color: #2563eb;
        }
        
        .filter-btn.green.active {
            background: #16a34a;
            border-color: #16a34a;
        }
        
        .filter-btn.yellow.active {
            background: #ca8a04;
            border-color: #ca8a04;
        }
        
        .filter-btn.red.active {
            background: #dc2626;
            border-color: #dc2626;
        }
        
        /* Table */
        .table-container {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .table-wrapper {
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th {
            background: #f9fafb;
            padding: 15px 12px;
            text-align: right;
            font-weight: 600;
            color: #374151;
            font-size: 13px;
            border-bottom: 1px solid #e5e7eb;
            white-space: nowrap;
        }
        
        td {
            padding: 12px;
            border-bottom: 1px solid #e5e7eb;
            font-size: 13px;
            color: #4b5563;
        }
        
        tr:hover {
            background: #f9fafb;
        }
        
        .product-name {
            max-width: 250px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .quantity {
            font-weight: bold;
            text-align: center;
        }
        
        .quantity.good { color: #16a34a; }
        .quantity.low { color: #dc2626; }
        
        .price {
            font-weight: 600;
        }
        
        .selling-price {
            color: #2563eb;
            font-weight: bold;
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 500;
        }
        
        .status-good {
            background: #dcfce7;
            color: #166534;
        }
        
        .status-low {
            background: #fef3c7;
            color: #92400e;
        }
        
        .status-out {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .actions {
            display: flex;
            gap: 5px;
        }
        
        .action-btn {
            padding: 6px 10px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }
        
        .action-btn.edit {
            background: #eff6ff;
            color: #2563eb;
        }
        
        .action-btn.edit:hover {
            background: #dbeafe;
        }
        
        .action-btn.delete {
            background: #fef2f2;
            color: #dc2626;
        }
        
        .action-btn.delete:hover {
            background: #fee2e2;
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }
        
        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }
        
        .table-footer {
            display: flex;
            justify-content: space-between;
            padding: 15px;
            background: #f9fafb;
            color: #666;
            font-size: 13px;
        }
        
        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .modal-overlay.active {
            display: flex;
        }
        
        .modal {
            background: white;
            border-radius: 16px;
            width: 100%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1);
        }
        
        .modal-header {
            padding: 20px;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .modal-header h2 {
            font-size: 18px;
            color: #1a1a1a;
        }
        
        .modal-body {
            padding: 20px;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            color: #374151;
            font-size: 13px;
            font-weight: 500;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 14px;
            text-align: right;
            transition: border-color 0.2s;
        }
        
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #2563eb;
        }
        
        .form-group input:disabled {
            background: #f3f4f6;
            color: #6b7280;
        }
        
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            padding: 15px 20px;
            border-top: 1px solid #e5e7eb;
        }
        
        /* Confirm Dialog */
        .confirm-dialog {
            text-align: center;
            padding: 30px;
        }
        
        .confirm-dialog h3 {
            margin-bottom: 10px;
            color: #1a1a1a;
        }
        
        .confirm-dialog p {
            color: #666;
            margin-bottom: 25px;
        }
        
        /* Toast */
        .toast-container {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .toast {
            padding: 15px 25px;
            border-radius: 10px;
            color: white;
            font-weight: 500;
            animation: slideDown 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .toast.success { background: #16a34a; }
        .toast.error { background: #dc2626; }
        .toast.info { background: #2563eb; }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Footer */
        .footer {
            background: white;
            border-top: 1px solid #e0e0e0;
            padding: 20px;
            text-align: center;
            color: #999;
            font-size: 13px;
            margin-top: 40px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .filters {
                justify-content: center;
            }
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #a1a1a1;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div>
                <h1>ğŸ”§ Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…Ø­Ù„ Ù‚Ø·Ø¹ Ø§Ù„ØºÙŠØ§Ø±</h1>
                <p>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²Ù† ÙˆØ§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø³Ù‡ÙˆÙ„Ø© - ÙŠØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª</p>
            </div>
            <div class="btn-group">
                <button class="btn btn-primary" onclick="openModal()">
                    <span>+</span> Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬
                </button>
                <button class="btn btn-outline" onclick="exportData()">
                    ğŸ“¥ ØªØµØ¯ÙŠØ±
                </button>
                <label class="btn btn-outline" style="cursor: pointer;">
                    ğŸ“¤ Ø§Ø³ØªÙŠØ±Ø§Ø¯
                    <input type="file" accept=".json" onchange="importData(this)" style="display: none;">
                </label>
                <button class="btn btn-orange" onclick="resetData()">
                    ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†
                </button>
                <button class="btn btn-danger" onclick="clearAll()">
                    ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„ÙƒÙ„
                </button>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Dashboard -->
        <div class="dashboard">
            <h2>ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
            <div class="stats-grid">
                <div class="stat-card blue">
                    <div class="stat-header">
                        <span class="stat-title">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</span>
                        <span class="stat-icon">ğŸ“¦</span>
                    </div>
                    <div class="stat-value" id="totalProducts">0</div>
                    <div class="stat-subtitle"><span id="totalQuantity">0</span> Ù‚Ø·Ø¹Ø© ÙÙŠ Ø§Ù„Ù…Ø®Ø²Ù†</div>
                </div>
                <div class="stat-card green">
                    <div class="stat-header">
                        <span class="stat-title">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ØªÙˆÙØ±Ø©</span>
                        <span class="stat-icon">âœ…</span>
                    </div>
                    <div class="stat-value" id="inStockProducts">0</div>
                    <div class="stat-subtitle">Ù…Ù†ØªØ¬ Ø¨ÙƒÙ…ÙŠØ© Ø¬ÙŠØ¯Ø©</div>
                </div>
                <div class="stat-card yellow">
                    <div class="stat-header">
                        <span class="stat-title">ÙƒÙ…ÙŠØ© Ù‚Ù„ÙŠÙ„Ø©</span>
                        <span class="stat-icon">âš ï¸</span>
                    </div>
                    <div class="stat-value" id="lowStockProducts">0</div>
                    <div class="stat-subtitle">Ù…Ù†ØªØ¬Ø§Øª ØªØ­ØªØ§Ø¬ ØªØ¬Ø¯ÙŠØ¯</div>
                </div>
                <div class="stat-card red">
                    <div class="stat-header">
                        <span class="stat-title">Ù†ÙØ°Øª Ø§Ù„ÙƒÙ…ÙŠØ©</span>
                        <span class="stat-icon">âŒ</span>
                    </div>
                    <div class="stat-value" id="outOfStockProducts">0</div>
                    <div class="stat-subtitle">Ù…Ù†ØªØ¬Ø§Øª ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©</div>
                </div>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card" style="border-top: 3px solid #3b82f6; background: #eff6ff;">
                    <div class="stat-header">
                        <span class="stat-title" style="color: #1e40af;">Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø®Ø²Ù† (ØªÙƒÙ„ÙØ©)</span>
                        <span class="stat-icon">ğŸ’°</span>
                    </div>
                    <div class="stat-value" style="color: #1e40af;" id="totalBaseValue">0 Ø¬.Ù…</div>
                </div>
                <div class="stat-card" style="border-top: 3px solid #22c55e; background: #f0fdf4;">
                    <div class="stat-header">
                        <span class="stat-title" style="color: #166534;">Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø®Ø²Ù† (Ø¨ÙŠØ¹)</span>
                        <span class="stat-icon">ğŸ’µ</span>
                    </div>
                    <div class="stat-value" style="color: #166534;" id="totalSellingValue">0 Ø¬.Ù…</div>
                </div>
                <div class="stat-card" style="border-top: 3px solid #a855f7; background: #faf5ff;">
                    <div class="stat-header">
                        <span class="stat-title" style="color: #7c3aed;">Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹</span>
                        <span class="stat-icon">ğŸ“ˆ</span>
                    </div>
                    <div class="stat-value" style="color: #7c3aed;" id="expectedProfit">0 Ø¬.Ù…</div>
                </div>
            </div>
        </div>

        <!-- Search Section -->
        <div class="search-section">
            <div class="search-header">
                <span style="font-size: 20px;">ğŸ”</span>
                <h3>Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h3>
            </div>
            <div class="search-box">
                <span class="search-icon">ğŸ”</span>
                <input 
                    type="text" 
                    class="search-input" 
                    id="searchInput"
                    placeholder="Ø§ÙƒØªØ¨ Ù‡Ù†Ø§ Ù„Ù„Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ØŒ Ø§Ù„ÙƒÙˆØ¯ØŒ Ø§Ù„Ø´Ø±ÙƒØ©ØŒ Ø£Ùˆ Ù…ÙˆØ¯ÙŠÙ„ Ø§Ù„Ø³ÙŠØ§Ø±Ø©..."
                    oninput="handleSearch(this.value)"
                >
                <button class="clear-search" id="clearSearch" onclick="clearSearch()">âœ•</button>
            </div>
            <div class="search-results" id="searchResults"></div>
        </div>

        <!-- Filters -->
        <div class="filters">
            <span class="filter-label">
                <span>ğŸ”§</span>
                <span>ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨:</span>
            </span>
            <button class="filter-btn active" onclick="setFilter('all')" id="filter-all">Ø§Ù„ÙƒÙ„</button>
            <button class="filter-btn green" onclick="setFilter('inStock')" id="filter-inStock">Ù…ØªÙˆÙØ±</button>
            <button class="filter-btn yellow" onclick="setFilter('lowStock')" id="filter-lowStock">ÙƒÙ…ÙŠØ© Ù‚Ù„ÙŠÙ„Ø©</button>
            <button class="filter-btn red" onclick="setFilter('outOfStock')" id="filter-outOfStock">Ù†ÙØ°Øª</button>
        </div>

        <!-- Products Table -->
        <div class="table-container">
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Ø§Ù„ÙƒÙˆØ¯</th>
                            <th>Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</th>
                            <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                            <th>Ø§Ù„Ø´Ø±ÙƒØ©</th>
                            <th>Ø§Ù„Ù†ÙˆØ¹</th>
                            <th>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ</th>
                            <th>Ø§Ù„Ø®Ø¯Ù…Ø©</th>
                            <th>Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹</th>
                            <th>Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„</th>
                            <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                            <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                        </tr>
                    </thead>
                    <tbody id="productsTable">
                        <!-- Products will be inserted here -->
                    </tbody>
                </table>
            </div>
            <div class="table-footer">
                <span id="filteredCount">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: 0</span>
                <span id="totalCount">Ù…Ù† Ø£ØµÙ„ 0 Ù…Ù†ØªØ¬</span>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <p>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…Ø­Ù„ Ù‚Ø·Ø¹ Ø§Ù„ØºÙŠØ§Ø± Â© 2025 - ÙŠØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª</p>
    </footer>

    <!-- Product Modal -->
    <div class="modal-overlay" id="productModal">
        <div class="modal">
            <div class="modal-header">
                <h2 id="modalTitle">Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h2>
            </div>
            <div class="modal-body">
                <form id="productForm" onsubmit="saveProduct(event)">
                    <input type="hidden" id="productId">
                    <div class="form-row">
                        <div class="form-group">
                            <label>ÙƒÙˆØ¯ Ø§Ù„Ù…Ù†ØªØ¬</label>
                            <input type="text" id="itemCode" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„Ù…Ù†ØªØ¬">
                        </div>
                        <div class="form-group">
                            <label>Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ *</label>
                            <input type="text" id="productName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹ *</label>
                            <input type="number" id="quantity" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¹Ø¯Ø¯" required min="0" value="0">
                        </div>
                        <div class="form-group">
                            <label>Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©</label>
                            <input type="text" id="company" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Ù†ÙˆØ¹ Ø§Ù„ØµÙ†Ø§Ø¹Ø©</label>
                            <input type="text" id="manufactureType" placeholder="Ù…Ø«Ø§Ù„: ÙƒÙˆØ±ÙŠØŒ ØµÙŠÙ†ÙŠØŒ ØªØ§ÙŠÙˆØ§Ù†ÙŠ">
                        </div>
                        <div class="form-group">
                            <label>Ù…ÙˆØ¯ÙŠÙ„ Ø§Ù„Ø³ÙŠØ§Ø±Ø©</label>
                            <input type="text" id="carModel" placeholder="Ø£Ø¯Ø®Ù„ Ù…ÙˆØ¯ÙŠÙ„ Ø§Ù„Ø³ÙŠØ§Ø±Ø©">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ *</label>
                            <input type="number" id="basePrice" placeholder="0.00" required min="0" step="0.01" value="0" oninput="calculateSellingPrice()">
                        </div>
                        <div class="form-group">
                            <label>Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø¶Ø§ÙØ© *</label>
                            <input type="number" id="serviceFee" placeholder="1.20" required min="1" step="0.01" value="1.20" oninput="calculateSellingPrice()">
                        </div>
                        <div class="form-group">
                            <label>Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹</label>
                            <input type="number" id="sellingPrice" disabled value="0">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline" onclick="closeModal()">Ø¥Ù„ØºØ§Ø¡</button>
                        <button type="submit" class="btn btn-primary">Ø­ÙØ¸</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Delete Confirm Modal -->
    <div class="modal-overlay" id="deleteModal">
        <div class="modal" style="max-width: 400px;">
            <div class="confirm-dialog">
                <h3>âš ï¸ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù</h3>
                <p>Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ØŸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡.</p>
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button class="btn btn-outline" onclick="closeDeleteModal()">Ø¥Ù„ØºØ§Ø¡</button>
                    <button class="btn btn-danger" onclick="confirmDelete()" style="background: #dc2626; color: white;">Ø­Ø°Ù</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <script>
        // Initial Data
        const initialProducts = [
            { id: '1', itemCode: '', name: 'ÙÙ„ØªØ± Ø¨Ù†Ø²ÙŠÙ† ØªÙˆÙŠÙˆØªØ§ ÙŠØ§Ø±ÙŠØ³ 2010Ø®Ù„ÙŠØ¬ÙŠ', quantity: 2, company: '', manufactureType: '', basePrice: 450, serviceFee: 1.20, sellingPrice: 540, carModel: '' },
            { id: '2', itemCode: '', name: 'ØµØ±Ø© Ø®Ù„ÙÙŠ N16', quantity: 2, company: '', manufactureType: 'ØµÙŠÙ†ÙŠ', basePrice: 670, serviceFee: 1.20, sellingPrice: 804, carModel: '' },
            { id: '3', itemCode: '', name: 'Ø·Ù‚Ù… Ø·Ù†Ø¨ÙˆØ±Ø© IX35', quantity: 1, company: 'vorTEX', manufactureType: 'ÙƒÙˆØ±ÙŠ', basePrice: 1600, serviceFee: 1.25, sellingPrice: 2000, carModel: '' },
            { id: '4', itemCode: '', name: 'Ø·Ù‚Ù… Ø·Ù†Ø¨ÙˆØ±Ø© N16', quantity: 1, company: '', manufactureType: 'ØªØ§ÙŠÙˆØ§Ù†ÙŠ', basePrice: 1450, serviceFee: 1.25, sellingPrice: 1812.50, carModel: '' },
            { id: '5', itemCode: '', name: 'Ø·Ù‚Ù… Ø·Ù†Ø¨ÙˆØ±Ø© N17', quantity: 2, company: 'Ø³ÙŠØ²Ø±', manufactureType: '', basePrice: 1500, serviceFee: 1.25, sellingPrice: 1875, carModel: '' },
            { id: '6', itemCode: '', name: 'Ø·Ù‚Ù… Ø·Ù†Ø¨ÙˆØ±Ø© Ø§ÙÙŠÙˆ Ù¢Ù Ù¡Ù  - Ø®Ù„ÙÙŠÙ¢Ù Ù¡Ù£', quantity: 1, company: 'GSB', manufactureType: 'ØµÙŠÙ†ÙŠ', basePrice: 2000, serviceFee: 1.25, sellingPrice: 2500, carModel: '' },
            { id: '7', itemCode: '', name: 'Ø·Ù‚Ù… Ø·Ù†Ø¨ÙˆØ±Ø© Ø§ÙƒØ³Ù†Øª Ø®Ù„ÙÙŠ', quantity: 1, company: '', manufactureType: 'ÙƒÙˆØ±ÙŠ', basePrice: 1600, serviceFee: 1.25, sellingPrice: 2000, carModel: '' },
            { id: '8', itemCode: '', name: 'Ø·Ù‚Ù… Ø·Ù†Ø¨ÙˆØ±Ø© Ø§Ù„Ù†ØªØ±Ø§ MD', quantity: 1, company: '', manufactureType: 'ØªØ§ÙŠÙˆØ§Ù†ÙŠ', basePrice: 1700, serviceFee: 1.25, sellingPrice: 2125, carModel: '' },
            { id: '9', itemCode: '', name: 'Ø·Ù‚Ù… Ø·Ù†Ø¨ÙˆØ±Ø© Ø§ÙˆØ¨ØªØ±Ø§ Ø®Ù„ÙÙŠ', quantity: 1, company: '', manufactureType: 'ÙƒÙˆØ±ÙŠ', basePrice: 1250, serviceFee: 1.25, sellingPrice: 1562.50, carModel: '' },
            { id: '10', itemCode: '', name: 'Ø·Ù‚Ù… Ø·Ù†Ø¨ÙˆØ±Ø© ØªØ±ÙƒÙŠ Ø®Ù„ÙÙŠ', quantity: 1, company: 'GAS', manufactureType: 'ØªØ§ÙŠÙˆØ§Ù†ÙŠ', basePrice: 1450, serviceFee: 1.25, sellingPrice: 1812.50, carModel: '' },
            { id: '11', itemCode: '', name: 'Ø·Ù‚Ù… Ø·Ù†Ø¨ÙˆØ±Ø© Ø®Ù„ÙŠØ¬ÙŠ Ø®Ù„ÙÙŠ', quantity: 1, company: 'GAS', manufactureType: 'ØªØ§ÙŠÙˆØ§Ù†ÙŠ', basePrice: 1700, serviceFee: 1.25, sellingPrice: 2125, carModel: '' },
            { id: '12', itemCode: '', name: 'Ø·Ù‚Ù… Ø·Ù†Ø¨ÙˆØ±Ø© Ø³Ø¨ÙˆØ±ØªØ§Ø¬ / IX35 Hi-Q', quantity: 1, company: '', manufactureType: 'ØµÙŠÙ†ÙŠ', basePrice: 1550, serviceFee: 1.25, sellingPrice: 1937.50, carModel: '' },
            { id: '13', itemCode: '', name: 'ÙØªÙ„Ø± ÙØªÙŠØ³ Ø§Ù„Ù†ØªØ±Ø§ MD', quantity: 1, company: '', manufactureType: '', basePrice: 275, serviceFee: 1.20, sellingPrice: 330, carModel: '' },
            { id: '14', itemCode: '', name: 'ÙÙ„ØªØ± ØªÙƒÙŠÙ Ù‚Ø±Ø´ Ø®Ù„ÙŠØ¬ÙŠ', quantity: 1, company: '', manufactureType: '', basePrice: 90, serviceFee: 1.20, sellingPrice: 108, carModel: '' },
            { id: '15', itemCode: '', name: 'Ø§ÙˆÙ„Ø³ÙŠ Ù‚Ø±Ø¨Ù‡ ÙØªÙŠØ³ Ø§ØªÙˆÙ…Ø§ØªÙŠÙƒ Ù‚Ø±Ø´', quantity: 2, company: '', manufactureType: '', basePrice: 45, serviceFee: 1.20, sellingPrice: 54, carModel: '' },
            { id: '16', itemCode: '', name: 'Ø§ÙˆÙ„Ø³ÙŠ ÙƒØ±Ù†Ùƒ Ø§Ù…Ø§Ù…ÙŠ Ù‚Ø±Ø´', quantity: 2, company: '', manufactureType: '', basePrice: 40, serviceFee: 1.20, sellingPrice: 48, carModel: '' },
            { id: '17', itemCode: '', name: 'Ø§ÙˆÙ„Ø³ÙŠ ÙƒØ±Ù†Ùƒ Ø®Ù„ÙÙŠ Ù†ÙŠÙˆ Ø§Ù„Ù†ØªØ±Ø§', quantity: 2, company: '', manufactureType: '', basePrice: 60, serviceFee: 1.20, sellingPrice: 72, carModel: '' },
            { id: '18', itemCode: '', name: 'Ø§ÙˆÙ„Ø³ÙŠ ÙƒÙˆØ¨Ù„Ù† Ø¨ÙˆÙ…Ù‡', quantity: 2, company: '', manufactureType: '', basePrice: 40, serviceFee: 1.20, sellingPrice: 48, carModel: '' },
            { id: '19', itemCode: '', name: 'Ø§ÙˆÙ„Ø³ÙŠ ÙƒÙˆØ¨Ù„Ù† ØªÙˆØ³Ø§Ù† ÙŠÙ…ÙŠÙ† Ø´Ù…Ø§Ù„', quantity: 2, company: '', manufactureType: '', basePrice: 120, serviceFee: 1.20, sellingPrice: 144, carModel: '' },
            { id: '20', itemCode: '', name: 'Ø§ÙŠØ¯Ù„ ÙØ±Ù†Ø§ ÙƒÙˆØ±ÙŠ', quantity: 3, company: '', manufactureType: '', basePrice: 0, serviceFee: 1.20, sellingPrice: 0, carModel: '' },
            { id: '21', itemCode: '', name: 'Ø§ÙŠØ¯Ù„ Ù„Ø§Ù†ÙˆØ³ ÙƒÙˆØ±ÙŠ', quantity: 2, company: '', manufactureType: '', basePrice: 0, serviceFee: 1.20, sellingPrice: 0, carModel: '' },
            { id: '22', itemCode: '', name: 'Ø¨Ø§Ø± Ø®Ø§Ø¬ÙŠ Ø¨ÙˆÙ…Ø©', quantity: 1, company: '', manufactureType: '', basePrice: 500, serviceFee: 1.20, sellingPrice: 600, carModel: '' },
            { id: '23', itemCode: '', name: 'Ø¨Ø§Ø± Ø®Ø§Ø±Ø¬ÙŠ N17', quantity: 1, company: '', manufactureType: '', basePrice: 625, serviceFee: 1.20, sellingPrice: 750, carModel: '' },
            { id: '24', itemCode: '', name: 'Ø¨Ø§Ø± Ø®Ø§Ø±Ø¬ÙŠ N16', quantity: 1, company: '', manufactureType: '', basePrice: 730, serviceFee: 1.20, sellingPrice: 876, carModel: '' },
            { id: '25', itemCode: '', name: 'Ø¨Ø§Ø± Ø®Ø§Ø±Ø¬ÙŠ Ø§ÙÙŠÙˆ', quantity: 1, company: '', manufactureType: '', basePrice: 625, serviceFee: 1.20, sellingPrice: 750, carModel: '' },
            { id: '26', itemCode: '', name: 'Ø¨Ø§Ø± Ø®Ø§Ø±Ø¬ÙŠ Ø§ÙƒØ³Ù†Øª RB', quantity: 1, company: '', manufactureType: '', basePrice: 650, serviceFee: 1.20, sellingPrice: 780, carModel: '' },
            { id: '27', itemCode: '', name: 'Ø¨Ø§Ø± Ø®Ø§Ø±Ø¬ÙŠ Ø§Ù„Ù†ØªØ±Ø§', quantity: 1, company: '', manufactureType: '', basePrice: 575, serviceFee: 1.20, sellingPrice: 690, carModel: '' },
            { id: '28', itemCode: '', name: 'Ø¨Ø§Ø± Ø®Ø§Ø±Ø¬ÙŠ Ø§Ù„Ù†ØªØ±Ø§ HD', quantity: 1, company: '', manufactureType: '', basePrice: 780, serviceFee: 1.20, sellingPrice: 936, carModel: '' },
            { id: '29', itemCode: '', name: 'Ø¨Ø§Ø± Ø®Ø§Ø±Ø¬ÙŠ Ø§Ù„Ù†ØªØ±Ø§ MD', quantity: 1, company: '', manufactureType: '', basePrice: 850, serviceFee: 1.20, sellingPrice: 1020, carModel: '' },
            { id: '30', itemCode: '', name: 'Ø¨Ø§Ø± Ø®Ø§Ø±Ø¬ÙŠ Ø§ÙˆØ¨ØªØ±Ø§', quantity: 1, company: '', manufactureType: '', basePrice: 650, serviceFee: 1.20, sellingPrice: 780, carModel: '' },
            { id: '31', itemCode: '', name: 'Ø¨Ø§Ø± Ø®Ø§Ø±Ø¬ÙŠ Ø³ÙŠØ±Ø§ØªÙˆ Ù¢Ù Ù¡Ù£', quantity: 1, company: '', manufactureType: '', basePrice: 850, serviceFee: 1.20, sellingPrice: 1020, carModel: '' },
            { id: '32', itemCode: '', name: 'Ø¨Ø§Ø± Ø®Ø§Ø±Ø¬ÙŠ Ø³ÙŠØ±Ø§ØªÙˆ Ù¢Ù Ù¡Ù¤', quantity: 1, company: '', manufactureType: '', basePrice: 850, serviceFee: 1.20, sellingPrice: 1020, carModel: '' },
            { id: '33', itemCode: '', name: 'Ø¨Ø§Ø± Ø®Ø§Ø±Ø¬ÙŠ Ø³ÙŠÙÙŠØ§', quantity: 2, company: '', manufactureType: '', basePrice: 385, serviceFee: 1.20, sellingPrice: 462, carModel: '' },
            { id: '34', itemCode: '', name: 'Ø¨Ø§Ø± Ø®Ø§Ø±Ø¬ÙŠ Ø³ÙŠÙÙŠØ§', quantity: 1, company: '', manufactureType: '', basePrice: 450, serviceFee: 1.20, sellingPrice: 540, carModel: '' },
            { id: '35', itemCode: '', name: 'Ø¨Ø§Ø± Ø®Ø§Ø±Ø¬ÙŠ ÙÙŠØ±Ù†Ø§', quantity: 1, company: '', manufactureType: '', basePrice: 485, serviceFee: 1.20, sellingPrice: 582, carModel: '' },
            { id: '36', itemCode: '', name: 'Ø¨Ø§Ø± Ø®Ø§Ø±Ø¬ÙŠ Ù‚Ø±ÙŠØ´', quantity: 1, company: '', manufactureType: '', basePrice: 650, serviceFee: 1.20, sellingPrice: 780, carModel: '' },
            { id: '37', itemCode: '', name: 'Ø¨Ø§Ø± Ø®Ø§Ø±Ø¬ÙŠ ÙƒØ§Ø±Ù†Ø² Ù¢Ù Ù¡Ù£', quantity: 1, company: '', manufactureType: '', basePrice: 850, serviceFee: 1.20, sellingPrice: 1020, carModel: '' },
            { id: '38', itemCode: '', name: 'Ø¨Ø§Ø± Ø®Ø§Ø±Ø¬ÙŠ ÙƒØ±ÙˆÙ„Ø§', quantity: 1, company: '', manufactureType: '', basePrice: 550, serviceFee: 1.20, sellingPrice: 660, carModel: '' },
            { id: '39', itemCode: '', name: 'Ø¨Ø§Ø± Ø®Ø§Ø±Ø¬ÙŠ Ù„Ø§Ù†ÙˆØ³', quantity: 1, company: '', manufactureType: '', basePrice: 500, serviceFee: 1.20, sellingPrice: 600, carModel: '' },
            { id: '40', itemCode: '', name: 'Ø¨Ø§Ø± Ø®Ø§Ø±Ø¬ÙŠ Ù†ÙŠÙˆ Ø§ÙƒØ³Ù†Øª', quantity: 1, company: '', manufactureType: '', basePrice: 630, serviceFee: 1.20, sellingPrice: 756, carModel: '' },
            { id: '41', itemCode: '', name: 'Ø¨Ø§Ø± Ø®Ø§Ø±Ø¬ÙŠ Ù†ÙŠÙˆ Ø§Ù„ÙƒØ³Ù†Øª', quantity: 1, company: '', manufactureType: '', basePrice: 500, serviceFee: 1.20, sellingPrice: 600, carModel: '' },
            { id: '42', itemCode: '', name: 'Ø¨Ø§Ø± Ø®Ø§Ø±Ø¬ÙŠ Ù†ÙŠÙˆ Ø§Ù„Ù†ØªØ±Ø§', quantity: 1, company: '', manufactureType: '', basePrice: 625, serviceFee: 1.20, sellingPrice: 750, carModel: '' },
            { id: '43', itemCode: '', name: 'Ø¨Ø§Ø± Ø¯Ø§Ø®Ù„ÙŠ Ø§Ø³Ø¨Ø§Ø±Ùƒ', quantity: 1, company: '', manufactureType: '', basePrice: 395, serviceFee: 1.20, sellingPrice: 474, carModel: '' },
            { id: '44', itemCode: '', name: 'Ø¨Ø§Ø± Ø¯Ø§Ø®Ù„ÙŠ Ø§ÙÙŠÙˆ', quantity: 1, company: '', manufactureType: '', basePrice: 800, serviceFee: 1.20, sellingPrice: 960, carModel: '' },
            { id: '45', itemCode: '', name: 'Ø¨Ø§Ø± Ø¯Ø§Ø®Ù„ÙŠ Ø§ÙƒØ³Ù†Øª RB', quantity: 1, company: '', manufactureType: 'Ø§ØµÙ„ÙŠ', basePrice: 500, serviceFee: 1.20, sellingPrice: 600, carModel: '' },
            { id: '46', itemCode: '', name: 'Ø¨Ø§Ø± Ø¯Ø§Ø®Ù„ÙŠ Ø§Ù„ÙƒØ³Ù†Øª RB', quantity: 1, company: '', manufactureType: '', basePrice: 550, serviceFee: 1.20, sellingPrice: 660, carModel: '' },
            { id: '47', itemCode: '', name: 'Ø¨Ø§Ø± Ø¯Ø§Ø®Ù„ÙŠ Ø§Ù„Ù†ØªØ±Ø§ Ù¢Ù Ù Ù¥', quantity: 1, company: '', manufactureType: '', basePrice: 425, serviceFee: 1.20, sellingPrice: 510, carModel: '' },
            { id: '48', itemCode: '', name: 'Ø¨Ø§Ø± Ø¯Ø§Ø®Ù„ÙŠ Ø§Ù„Ù†ØªØ±Ø§ HD', quantity: 1, company: '', manufactureType: '', basePrice: 500, serviceFee: 1.20, sellingPrice: 600, carModel: '' },
            { id: '49', itemCode: '', name: 'Ø¨Ø§Ø± Ø¯Ø§Ø®Ù„ÙŠ Ø§Ù„Ù†ØªØ±Ø§ MD', quantity: 1, company: '', manufactureType: '', basePrice: 825, serviceFee: 1.20, sellingPrice: 990, carModel: '' },
            { id: '50', itemCode: '', name: 'Ø¨Ø§Ø± Ø¯Ø§Ø®Ù„ÙŠ Ø³Ø¨ÙˆØ±ØªØ§Ø¬', quantity: 1, company: '', manufactureType: '', basePrice: 600, serviceFee: 1.20, sellingPrice: 720, carModel: '' }
        ];

        // State
        let products = [];
        let searchTerm = '';
        let filterType = 'all';
        let deleteId = null;

        // Initialize
        function init() {
            const stored = localStorage.getItem('auto-parts-products');
            if (stored) {
                products = JSON.parse(stored);
            } else {
                products = [...initialProducts];
                saveToStorage();
            }
            render();
        }

        function saveToStorage() {
            localStorage.setItem('auto-parts-products', JSON.stringify(products));
        }

        // Dashboard
        function updateDashboard() {
            const totalProducts = products.length;
            const totalQuantity = products.reduce((sum, p) => sum + p.quantity, 0);
            const lowStockProducts = products.filter(p => p.quantity > 0 && p.quantity <= 2).length;
            const outOfStockProducts = products.filter(p => p.quantity === 0).length;
            const inStockProducts = products.filter(p => p.quantity > 2).length;
            
            const totalBaseValue = products.reduce((sum, p) => sum + (p.basePrice * p.quantity), 0);
            const totalSellingValue = products.reduce((sum, p) => sum + (p.sellingPrice * p.quantity), 0);
            const expectedProfit = totalSellingValue - totalBaseValue;

            document.getElementById('totalProducts').textContent = totalProducts;
            document.getElementById('totalQuantity').textContent = totalQuantity;
            document.getElementById('inStockProducts').textContent = inStockProducts;
            document.getElementById('lowStockProducts').textContent = lowStockProducts;
            document.getElementById('outOfStockProducts').textContent = outOfStockProducts;
            document.getElementById('totalBaseValue').textContent = formatPrice(totalBaseValue);
            document.getElementById('totalSellingValue').textContent = formatPrice(totalSellingValue);
            document.getElementById('expectedProfit').textContent = formatPrice(expectedProfit);
        }

        function formatPrice(price) {
            return new Intl.NumberFormat('ar-EG', {
                style: 'currency',
                currency: 'EGP',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(price);
        }

        // Search
        function handleSearch(value) {
            searchTerm = value;
            const clearBtn = document.getElementById('clearSearch');
            const resultsDiv = document.getElementById('searchResults');
            
            if (value) {
                clearBtn.style.display = 'block';
                const filtered = getFilteredProducts();
                resultsDiv.innerHTML = `ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ <strong>${filtered.length}</strong> Ù…Ù†ØªØ¬ Ù…Ø·Ø§Ø¨Ù‚ Ù„Ù€ "<strong>${value}</strong>"`;
            } else {
                clearBtn.style.display = 'none';
                resultsDiv.innerHTML = '';
            }
            
            renderTable();
        }

        function clearSearch() {
            document.getElementById('searchInput').value = '';
            handleSearch('');
        }

        // Filter
        function setFilter(type) {
            filterType = type;
            
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(`filter-${type}`).classList.add('active');
            
            renderTable();
        }

        function getFilteredProducts() {
            return products.filter(product => {
                const matchesSearch = 
                    product.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    product.itemCode.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    product.company.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    product.carModel.toLowerCase().includes(searchTerm.toLowerCase());
                
                if (filterType === 'all') return matchesSearch;
                if (filterType === 'lowStock') return matchesSearch && product.quantity > 0 && product.quantity <= 2;
                if (filterType === 'outOfStock') return matchesSearch && product.quantity === 0;
                if (filterType === 'inStock') return matchesSearch && product.quantity > 2;
                return matchesSearch;
            });
        }

        // Table
        function renderTable() {
            const filtered = getFilteredProducts();
            const tbody = document.getElementById('productsTable');
            
            if (filtered.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="12" class="empty-state">
                            <div class="empty-state-icon">ğŸ“¦</div>
                            <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„Ø¨Ø­Ø«</p>
                        </td>
                    </tr>
                `;
            } else {
                tbody.innerHTML = filtered.map((product, index) => {
                    const status = getStockStatus(product.quantity);
                    return `
                        <tr>
                            <td class="font-medium">${index + 1}</td>
                            <td>${product.itemCode || '-'}</td>
                            <td class="product-name" title="${product.name}">${product.name}</td>
                            <td class="quantity ${product.quantity <= 2 ? 'low' : 'good'}">${product.quantity}</td>
                            <td>${product.company || '-'}</td>
                            <td>${product.manufactureType || '-'}</td>
                            <td class="price">${formatPrice(product.basePrice)}</td>
                            <td>${product.serviceFee}x</td>
                            <td class="selling-price">${formatPrice(product.sellingPrice)}</td>
                            <td>${product.carModel || '-'}</td>
                            <td><span class="status-badge ${status.class}">${status.label}</span></td>
                            <td>
                                <div class="actions">
                                    <button class="action-btn edit" onclick="editProduct('${product.id}')">âœï¸ ØªØ¹Ø¯ÙŠÙ„</button>
                                    <button class="action-btn delete" onclick="deleteProduct('${product.id}')">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                                </div>
                            </td>
                        </tr>
                    `;
                }).join('');
            }
            
            document.getElementById('filteredCount').textContent = `Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: ${filtered.length}`;
            document.getElementById('totalCount').textContent = `Ù…Ù† Ø£ØµÙ„ ${products.length} Ù…Ù†ØªØ¬`;
        }

        function getStockStatus(quantity) {
            if (quantity === 0) return { label: 'Ù†ÙØ°Øª Ø§Ù„ÙƒÙ…ÙŠØ©', class: 'status-out' };
            if (quantity <= 2) return { label: 'ÙƒÙ…ÙŠØ© Ù‚Ù„ÙŠÙ„Ø©', class: 'status-low' };
            return { label: 'Ù…ØªÙˆÙØ±', class: 'status-good' };
        }

        // Modal
        function openModal() {
            document.getElementById('productModal').classList.add('active');
            document.getElementById('modalTitle').textContent = 'Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯';
            document.getElementById('productForm').reset();
            document.getElementById('productId').value = '';
            calculateSellingPrice();
        }

        function closeModal() {
            document.getElementById('productModal').classList.remove('active');
        }

        function calculateSellingPrice() {
            const basePrice = parseFloat(document.getElementById('basePrice').value) || 0;
            const serviceFee = parseFloat(document.getElementById('serviceFee').value) || 1;
            document.getElementById('sellingPrice').value = (basePrice * serviceFee).toFixed(2);
        }

        function saveProduct(e) {
            e.preventDefault();
            
            const id = document.getElementById('productId').value;
            const product = {
                id: id || Date.now().toString(),
                itemCode: document.getElementById('itemCode').value,
                name: document.getElementById('productName').value,
                quantity: parseInt(document.getElementById('quantity').value) || 0,
                company: document.getElementById('company').value,
                manufactureType: document.getElementById('manufactureType').value,
                basePrice: parseFloat(document.getElementById('basePrice').value) || 0,
                serviceFee: parseFloat(document.getElementById('serviceFee').value) || 1.2,
                sellingPrice: parseFloat(document.getElementById('sellingPrice').value) || 0,
                carModel: document.getElementById('carModel').value
            };
            
            if (id) {
                const index = products.findIndex(p => p.id === id);
                if (index !== -1) {
                    products[index] = product;
                }
                showToast('ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
            } else {
                products.push(product);
                showToast('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }
            
            saveToStorage();
            render();
            closeModal();
        }

        function editProduct(id) {
            const product = products.find(p => p.id === id);
            if (!product) return;
            
            document.getElementById('productId').value = product.id;
            document.getElementById('itemCode').value = product.itemCode;
            document.getElementById('productName').value = product.name;
            document.getElementById('quantity').value = product.quantity;
            document.getElementById('company').value = product.company;
            document.getElementById('manufactureType').value = product.manufactureType;
            document.getElementById('basePrice').value = product.basePrice;
            document.getElementById('serviceFee').value = product.serviceFee;
            document.getElementById('sellingPrice').value = product.sellingPrice;
            document.getElementById('carModel').value = product.carModel;
            
            document.getElementById('modalTitle').textContent = 'ØªØ¹Ø¯ÙŠÙ„ Ù…Ù†ØªØ¬';
            document.getElementById('productModal').classList.add('active');
        }

        // Delete
        function deleteProduct(id) {
            deleteId = id;
            document.getElementById('deleteModal').classList.add('active');
        }

        function closeDeleteModal() {
            document.getElementById('deleteModal').classList.remove('active');
            deleteId = null;
        }

        function confirmDelete() {
            if (deleteId) {
                products = products.filter(p => p.id !== deleteId);
                saveToStorage();
                render();
                showToast('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }
            closeDeleteModal();
        }

        // Export/Import
        function exportData() {
            const dataStr = JSON.stringify(products, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            const link = document.createElement('a');
            link.setAttribute('href', dataUri);
            link.setAttribute('download', 'auto-parts-data.json');
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            showToast('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        function importData(input) {
            const file = input.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const imported = JSON.parse(e.target.result);
                    if (Array.isArray(imported)) {
                        products = imported;
                        saveToStorage();
                        render();
                        showToast('ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
                    } else {
                        showToast('Ù…Ù„Ù ØºÙŠØ± ØµØ§Ù„Ø­', 'error');
                    }
                } catch (error) {
                    showToast('Ø®Ø·Ø£ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„Ù', 'error');
                }
            };
            reader.readAsText(file);
            input.value = '';
        }

        function resetData() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ©ØŸ')) {
                products = [...initialProducts];
                saveToStorage();
                render();
                showToast('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }
        }

        function clearAll() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§ØªØŸ')) {
                products = [];
                saveToStorage();
                render();
                showToast('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª', 'success');
            }
        }

        // Toast
        function showToast(message, type = 'info') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            container.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        // Render
        function render() {
            updateDashboard();
            renderTable();
        }

        // Close modals on outside click
        document.getElementById('productModal').addEventListener('click', function(e) {
            if (e.target === this) closeModal();
        });
        
        document.getElementById('deleteModal').addEventListener('click', function(e) {
            if (e.target === this) closeDeleteModal();
        });

        // Initialize
        init();
    </script>
</body>
</html>
